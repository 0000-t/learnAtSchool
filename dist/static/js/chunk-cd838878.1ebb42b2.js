(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd838878"],{"019a":function(e,t,n){},"0cc4":function(e,t,n){"use strict";n("b374")},"117f":function(e,t,n){"use strict";n("2c24")},"25b1":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tao-table"},[n("el-table",{staticClass:"myTable",attrs:{data:e.tableData,"cell-style":{padding:"6px",border:"0.3px solid #E6E6E6"},"header-cell-style":{background:"#F2F2F2",border:"0.3px solid #E6E6E6",color:"#737573"},border:"","highlight-current-row":""}},[e.expand?n("el-table-column",{attrs:{type:"expand"}},[[n("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[e._t("expand",[n("el-form-item",{attrs:{label:"商品名称"}},[n("div",[e._v("sdnvbgksdfbnsb")])])])],2)]],2):e._e(),e._l(e.title,(function(e,t){return n("el-table-column",{key:t,attrs:{align:"center",label:e.label,prop:e.prop,sortable:!!e.sort}})})),e.showTool?n("el-table-column",{attrs:{align:"center",label:"操作",width:e.toolWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showEdit?n("el-button",{staticClass:"t-btn",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("\n          "+e._s(e.editTxt)+"\n        ")]):e._e(),e.showOther?n("el-button",{staticClass:"t-btn",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(n){return e.handleOther(t.$index,t.row)}}},[e._v("\n          "+e._s(e.otherTxt)+"\n        ")]):e._e(),e.showDelete?n("el-button",{staticClass:"t-btn",attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}],null,!1,2313940382)}):e._e()],2),n("el-row",{staticClass:"path"},[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"grid-content table-page"},[e._t("page",[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":"","current-page":e.page,"page-size":e.pageSize,total:e.total},on:{"prev-click":e.lastPath,"next-click":e.nextPath,"current-change":e.currentPath}})])],2)])],1)],1)},r=[],o={props:{title:{type:Array},tableData:{type:Array},total:{type:Number,default:0},page:{type:Number,default:1},expand:{type:Boolean,default:!1},toolWidth:{type:Number,default:200},showTool:{type:Boolean,default:!0},showEdit:{type:Boolean,default:!0},showOther:{type:Boolean,default:!1},showDelete:{type:Boolean,default:!0},editTxt:{type:String,default:"编辑"},otherTxt:{type:String,default:"其它"},pageSize:{type:Number,default:10}},data(){return{tao:{name:"我的"}}},methods:{handleEdit(e,t){this.$emit("edit",{index:e,row:t})},handleOther(e,t){this.$emit("other",{index:e,row:t})},handleDelete(e,t){this.$emit("delete",{index:e,row:t})},lastPath(e){this.$emit("last",e)},nextPath(e){this.$emit("next",e)},currentPath(e){this.$emit("current",e)}},computed:{}},l=o,i=(n("0cc4"),n("2877")),s=Object(i["a"])(l,a,r,!1,null,"35ebeacc",null);t["a"]=s.exports},"281c":function(e,t,n){"use strict";n("be73")},"2c24":function(e,t,n){},"47ed":function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return c}));var a=n("1bab");function r(e,t=10){return Object(a["a"])({url:`/authority/search/${e}/${t}`})}function o(e){return Object(a["a"])({url:"/authority/"+e,method:"delete"})}function l(e){return Object(a["a"])({url:"/authority",method:"put",data:e})}function i(e){return console.log(e),Object(a["a"])({url:"/authority",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/authority/"+e})}function c(){return Object(a["a"])({url:"/authority"})}},"4ab5":function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"h",(function(){return l})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return d}));var a=n("1bab");function r(e,t=10){return Object(a["a"])({url:`/role/search/${e}/${t}`})}function o(e){return Object(a["a"])({url:"/role/"+e,method:"delete"})}function l(e){return Object(a["a"])({url:"/role",method:"put",data:e})}function i(e){return Object(a["a"])({url:"/role",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/role/"+e})}function c(){return Object(a["a"])({url:"/role"})}function u(e){return Object(a["a"])({url:"/authority/getRoleAuthority?roleId="+e})}function d(e){let{rightIds:t,roleId:n}=e;return Object(a["a"])({url:`/authority/giveRight2Role?rightIds=${t}&roleId=${n}`,method:"post"})}},"4d59":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("el-row",[n("el-col",{staticClass:"headCol",attrs:{span:24}},[n("div",{staticClass:"grid-content"},[e._t("module")],2)]),n("el-col",{staticClass:"myCol",attrs:{span:24}},[n("div",{staticClass:"grid-content"},[e._t("table")],2)])],1)],1)},r=[],o=n("25b1"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[n("el-form-item",{attrs:{label:"审批人"}},[n("el-input",{attrs:{placeholder:"审批人"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)},i=[],s={data(){return{formInline:{user:"",region:""}}},methods:{onSubmit(){console.log("submit!")}}},c=s,u=n("2877"),d=Object(u["a"])(c,l,i,!1,null,"4c4c51b0",null),h=d.exports,p={components:{Table:o["a"],InputGroup:h}},m=p,f=(n("117f"),Object(u["a"])(m,a,r,!1,null,"1ffb9b9c",null));t["a"]=f.exports},"8d85":function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"f",(function(){return u}));var a=n("1bab");function r(e,t=10){return Object(a["a"])({url:`/user/all/${e}/${t}`})}function o(){return Object(a["a"])({url:"/user/contacts",method:"post"})}function l(e){return Object(a["a"])({url:"/user/"+e,method:"delete"})}function i(e){return Object(a["a"])({url:"/user",method:"put",data:e})}function s(e){let{userId:t,roleIds:n}=e;return Object(a["a"])({url:`authority/giveRole2User?userId=${t}&roleIds=${n}`,method:"post"})}function c(e){let t=0==e.type?"/user/addAdmin":"/user/addTeacher";return Object(a["a"])({url:t,method:"post",data:e})}function u(e){return Object(a["a"])({url:"/user/"+e})}},9419:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user"},[n("Management",[n("div",{attrs:{slot:"module"},slot:"module"},[n("InputGroup",{on:{append:e.append,search:e.search,showAll:e.showAll}})],1),n("div",{staticClass:"slotTable",attrs:{slot:"table"},slot:"table"},[n("Table",{attrs:{editTxt:"设置权限",otherTxt:"编辑",showOther:!0,tableData:e.tableData,title:e.title,total:e.totalElements,page:e.page,toolWidth:280},on:{edit:e.handleEdit,other:e.handleOther,delete:e.handleDelete,current:e.currentPath}})],1)]),n("UserDialog",{attrs:{isShow:e.isShow,row:e.row},on:{confirm:e.confirm,cancel:e.cancel}}),n("SetRoleDialog",{attrs:{isShow:e.isShowSet,row:e.row},on:{confirm:e.confirm,cancel:e.cancel}})],1)},r=[],o=n("4d59"),l=n("25b1"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[n("el-form-item",{attrs:{label:"用户号"}},[n("el-input",{attrs:{placeholder:"用户号"},model:{value:e.formInline.id,callback:function(t){e.$set(e.formInline,"id","string"===typeof t?t.trim():t)},expression:"formInline.id"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("查询")])],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.append}},[e._v("添加")])],1)],1)},s=[],c={data(){return{formInline:{id:""}}},methods:{submit(e){this.formInline.id&&this.$emit("search",this.formInline)},append(){this.$emit("append")}}},u=c,d=n("2877"),h=Object(d["a"])(u,i,s,!1,null,"4cba0d44",null),p=h.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",{attrs:{isShow:e.isShow},on:{confirm:e.confirm,cancel:e.cancel}},[n("div",{attrs:{slot:"form"},slot:"form"},[n("el-form",{attrs:{"label-position":"right","label-width":"80px",model:e.row}},[n("el-form-item",{attrs:{label:"昵称"}},[n("el-input",{model:{value:e.row.nickname,callback:function(t){e.$set(e.row,"nickname",t)},expression:"row.nickname"}})],1),n("el-form-item",{attrs:{label:"名字"}},[n("el-input",{model:{value:e.row.username,callback:function(t){e.$set(e.row,"username",t)},expression:"row.username"}})],1),n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.row.type,callback:function(t){e.$set(e.row,"type",t)},expression:"row.type"}},[n("el-option",{attrs:{label:"管理员",value:"5"}}),n("el-option",{attrs:{label:"老师",value:"4"}}),n("el-option",{attrs:{label:"学生",value:"3"}})],1)],1),n("el-form-item",{attrs:{label:"手机号"}},[n("el-input",{model:{value:e.row.phone,callback:function(t){e.$set(e.row,"phone",t)},expression:"row.phone"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{model:{value:e.row.password,callback:function(t){e.$set(e.row,"password",t)},expression:"row.password"}})],1)],1)],1)])},f=[],b=n("8c8a"),w={components:{Dialog:b["a"]},props:{isShow:{type:Boolean,default:!1},row:{type:Object,default(){return{}}}},data(){return{}},methods:{confirm(){this.$emit("confirm",this.row)},cancel(){this.$emit("cancel")}}},g=w,y=(n("e565"),Object(d["a"])(g,m,f,!1,null,"9c3d28ae",null)),O=y.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",{attrs:{isShow:e.isShow},on:{confirm:e.confirm,cancel:e.cancel}},[n("div",{attrs:{slot:"form"},slot:"form"},[n("el-form",{attrs:{"label-position":"right","label-width":"80px",model:e.row}},[n("el-form-item",{attrs:{label:"名字"}},[n("el-input",{model:{value:e.row.username,callback:function(t){e.$set(e.row,"username",t)},expression:"row.username"}})],1),n("el-form-item",{attrs:{label:"权限"}},[n("el-radio-group",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},e._l(e.row.role,(function(t,a){return n("el-radio",{key:a,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)],1)],1)],1)])},v=[],x={components:{Dialog:b["a"]},props:{isShow:{type:Boolean,default:!1},row:{type:Object,default(){return{}}}},data(){return{checked:""}},methods:{confirm(){console.log(this.checked),this.$emit("confirm",{id:this.row.id,role:[this.checked],edit:this.row.edit})},cancel(){this.$emit("cancel")},handleCheckAllChange(e){console.log(e)},handleCheckedCitiesChange(e){console.log(e)}}},k=x,$=(n("9b72"),Object(d["a"])(k,j,v,!1,null,null,null)),_=$.exports,S=n("5c96"),D=n("7aa9"),E=n("8d85"),I=n("4ab5"),C=(n("47ed"),{components:{Management:o["a"],Table:l["a"],InputGroup:p,UserDialog:O,SetRoleDialog:_},data(){return{tableData:[],title:[{label:"名字",prop:"username"},{label:"昵称",prop:"nickname"},{label:"类型",prop:"type"},{label:"手机号",prop:"phone"}],role:[],row:{},isShow:!1,isShowSet:!1,totalElements:0,page:1}},created(){this.allUser(),this.getRole()},methods:{async userByPathAndSize(e,t=10){const n=await Object(E["e"])(e,t);this.totalElements=n.data.totalElements,this.tableData=n.data.content,this.page=e},async getRole(){let e=await Object(I["c"])();console.log(e.data),this.role=e.data},async allUser(){let e=await Object(E["d"])();this.tableData=[],Object.keys(e.data).forEach(t=>{this.tableData.push(...e.data[t])}),this.tableData.forEach(e=>{e.type=0==e.type?"管理员":1==e.type?"老师":"学生"})},handleEdit(e){this.row={username:e.row.username,id:e.row.id,role:this.role,edit:!0,type:e.row.type},this.isShowSet=!0},handleOther(e){this.row={username:e.row.username,nickname:e.row.nickname,type:e.row.type,phone:e.row.phone,password:e.row.password,id:e.row.id,edit:!0,other:!0},this.isShow=!0},handleDelete(e){S["MessageBox"].confirm("您确定删除这一行吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(async t=>{let n=await Object(E["c"])(e.row.id);n.flag?(Object(D["a"])("删除","success"),this.allUser(1)):Object(D["a"])("删除","error")}).catch(e=>{})},async confirm(e){if(this.closeDialog(),e.edit){if(e.other){let t=await Object(E["g"])({username:e.username,nickname:e.nickname,type:"管理员"==e.type?0:"老师"==e.type?1:2,phone:e.phone,password:e.password,id:e.id});return console.log(t),void(t.flag?(Object(D["a"])("编辑","success"),this.allUser(1)):Object(D["a"])("编辑","error"))}console.log(e);let t=await Object(E["a"])({userId:e.id,roleIds:e.role});t.flag?(Object(D["a"])("角色赋予","success"),this.allUser(1)):Object(D["a"])("角色赋予","error")}else{let t=await Object(E["b"])({id:"0",nickname:e.nickname,password:e.password,phone:e.phone,type:"管理员"==e.type?0:"老师"==e.type?1:2,username:e.username});t.flag?(Object(D["a"])("添加","success"),this.allUser(1)):Object(D["a"])("添加","error")}},async search(e){let t=await Object(E["f"])(e.id);t.flag?(this.tableData=[t.data],this.totalElements=this.tableData.length,Object(D["a"])("查询")):Object(D["a"])("查询","error")},cancel(){this.closeDialog()},closeDialog(){this.isShowSet=!1,this.isShow=!1},currentPath(e){this.allUser(e)},append(){this.row={},this.isShow=!0},showAll(){this.userByPathAndSize(1)}},computed:{}}),T=C,B=(n("281c"),Object(d["a"])(T,a,r,!1,null,null,null));t["default"]=B.exports},"9b72":function(e,t,n){"use strict";n("019a")},b374:function(e,t,n){},be73:function(e,t,n){},c13d:function(e,t,n){},e565:function(e,t,n){"use strict";n("c13d")}}]);
//# sourceMappingURL=chunk-cd838878.1ebb42b2.js.map